<% if @pxrd_pattern.well.present? %>
  <% content_for :title, "Edit PXRD Pattern for Well \\#{@pxrd_pattern.well.well_label_with_subwell}" %>
<% else %>
  <% content_for :title, "Edit PXRD Pattern" %>
<% end %>

<div class="d-flex justify-content-between align-items-center mb-4">
  <% if @pxrd_pattern.well.present? %>
    <h2>Edit PXRD Pattern for Well <%= @pxrd_pattern.well.well_label_with_subwell %></h2>
    <%= link_to "Back to Pattern", [@pxrd_pattern.well, @pxrd_pattern], class: "btn btn-outline-secondary" %>
  <% else %>
    <h2>Edit PXRD Pattern</h2>
    <%= link_to "Back to Pattern", @pxrd_pattern, class: "btn btn-outline-secondary" %>
  <% end %>
</div>

<div class="row">
  <div class="col-md-8">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">
          <i class="bi bi-pencil"></i> Pattern Details
        </h5>
        <% if @pxrd_pattern.well.present? %>
          <small class="text-muted">Plate: <%= @pxrd_pattern.well.plate.barcode %></small>
        <% end %>
      </div>
      <div class="card-body">
        <%= render 'form', pxrd_pattern: @pxrd_pattern %>
      </div>
    </div>
  </div>
  
  <div class="col-md-4">
    <div class="card">
      <div class="card-header">
        <h6 class="card-title mb-0">
          <i class="bi bi-info-circle"></i> Pattern Information
        </h6>
      </div>
      <div class="card-body">
        <dl class="row">
          <dt class="col-sm-5">Created:</dt>
          <dd class="col-sm-7"><%= @pxrd_pattern.created_at.strftime('%b %d, %Y') %></dd>
          
          <% if @pxrd_pattern.measured_at %>
            <dt class="col-sm-5">Measured:</dt>
            <dd class="col-sm-7"><%= @pxrd_pattern.measured_at.strftime('%b %d, %Y') %></dd>
          <% end %>
          
          <% if @pxrd_pattern.pxrd_data_file.attached? %>
            <dt class="col-sm-5">File:</dt>
            <dd class="col-sm-7">
              <%= link_to @pxrd_pattern.pxrd_data_file.filename, 
                         url_for(@pxrd_pattern.pxrd_data_file), 
                         class: "text-decoration-none" %>
            </dd>
          <% end %>
        </dl>
      </div>
    </div>
  </div>
</div>
